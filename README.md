# docker-practice

## Concepts

### Container

A container is a sandboxed process on your machine that is isolated from all other processes on the host machine.

also, a container

- is a runnable instance of an image.
- can be run on local machines, virtual machines or deployed to the cloud.
- is portable (can be run on any OS).
- is isolated from other containers and runs its own software, binaries, and configurations.

### Image

An Image contains everythig needed to run application; dependecies, configurations, binaries, scripts, etc.

### Volume

Volumes are the preferred mechanism for persisting data generated by and used by Docker containers.

## Manuals

- <https://docs.docker.com/get-started/>
- <https://docs.docker.com/get-started/02_our_app/>
- <https://docs.docker.com/get-started/03_updating_app/>
- <https://docs.docker.com/get-started/04_sharing_app/>
- <https://docs.docker.com/get-started/05_persisting_data/>
- <https://docs.docker.com/get-started/06_bind_mounts/>
- <https://docs.docker.com/get-started/07_multi_container/>
- <https://docs.docker.com/get-started/08_using_compose/>
- <https://docs.docker.com/get-started/09_image_best/>

## Docker Hub

- <https://hub.docker.com/repository/docker/jtoh0227/getting-started-with-apple-silicon>
- <https://hub.docker.com/repository/docker/jtoh0227/getting-started>

## Trouble Shooting

### docker image containerizing failed on external environment

input:

``` shell
// on https://labs.play-with-docker.com/

docker run -dp 3000:3000 jtoh0227/getting-started
```

output:

``` shell

WARNING: The requested image's platform (linux/arm64/v8) does not match the detected host platform (linux/amd64) and no specific platform was requested standard_init_linux.go:228: exec user process caused: exec format error

```

problem: docker image should be built or designated environment correponding to the runner environment.

- reference - <https://asecurity.dev/entry/Docker-MAC-M1-Error-images-platform-linuxarm64v8-does-not-match-the-detected-host-platform-%ED%95%B4%EA%B2%B0>

### build process failed

input :

``` shell
// on local dev

docker run -dp 3000:3000 \
   -w /app -v "$(pwd):/app" \
   --network todo-app \
   -e MYSQL_HOST=mysql \
   -e MYSQL_USER=root \
   -e MYSQL_PASSWORD=secret \
   -e MYSQL_DB=todos \
   node:12-alpine \
   sh -c "yarn install && yarn run dev"
```

output:

``` log
// docker logs <conatiner_id>

gyp ERR! configure error 
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYTHON env variable.
gyp ERR! stack     at PythonFinder.failNoPython (/app/node_modules/node-gyp/lib/configure.js:484:19)
gyp ERR! stack     at PythonFinder.<anonymous> (/app/node_modules/node-gyp/lib/configure.js:406:16)
gyp ERR! stack     at F (/app/node_modules/which/which.js:68:16)
gyp ERR! stack     at E (/app/node_modules/which/which.js:80:29)
gyp ERR! stack     at /app/node_modules/which/which.js:89:16
gyp ERR! stack     at /app/node_modules/isexe/index.js:42:5
gyp ERR! stack     at /app/node_modules/isexe/mode.js:8:5
gyp ERR! stack     at FSReqCallback.oncomplete (fs.js:168:21)
```

problem: Python was not installed on the container. Perhaps it is only for apple silicon.